# <center/> 面向对象需求分析 <center/>

[TOC]

## 1. 领域模型

> 领域模型描述的内容与软件对象无关,是纯粹对现实客观世界的抽象描述.

领域模型中概念类及其关系的创建步骤:

### 1.1 识别或抽象出领域的概念类或对象

根据名词短语识别概念类

| 步骤  | 描述                                                         |
| ----- | ------------------------------------------------------------ |
| **1** | 自助式的分布式温控系统,可以让入住的**客户**根据自己的需求调节**房间**的**温度**及**风速** |
| **2** | 并且可以实时显示出**客房空调**消耗的能量所产生的**费用**     |
| **3** | 当客户退房时,**前台**可以出具空调的**使用详单**及**账单**    |
| **4** | 空调运行期间,**空调管理员**能够监控各房间空调的**使用状态**  |
| **5** | 此外,**酒店经理**在需要的情况下可以查看不同时间范围内的格式化**统计报表** |

根据分析得到概念类:

> 入住客户、酒店、客房、客房空调、前台、空调管理员、酒店经理、统计报表、使用详单、账单；

其他名词：

> 温度是客房这一概念类的属性，温度、风速、费用、使用状态是客房空调的属性；

### 1.2 建立概念类之间的关系

> 领域模型着重考虑“须知道”型“关联”。

通用关联列表

| 关联                           | 描述                                                         |
| ------------------------------ | ------------------------------------------------------------ |
| A在物理上是B的一部分           | 不适用                                                       |
| A在逻辑上是B的一部分           | 客房-酒店，客房空调-客房                                     |
| A是对B的描述                   | 不适用                                                       |
| A是交易或者报表B的一项         | 不适用                                                       |
| A是B的一个成员                 | 前台-酒店，酒店经理-酒店，空调管理员-酒店                    |
| A是B的一个组织子单元           | 不适用                                                       |
| A使用或管理B                   | 空调管理员-客房空调，入住客户-客房，入住客户-客房空调，酒店经理-统计报表，前台-详单，前台-账单 |
| A与B通信                       | 入住客户-前台                                                |
| A与一个交易B有关               | 入住客户-酒店                                                |
| A是一个与另一个交易B有关的事物 | 不适用                                                       |
| A与B相邻                       | 不适用                                                       |

以上概念类之间的关系

| 概念类              | 关系                                                   |
| ------------------- | ------------------------------------------------------ |
| 客房-酒店           | 组合                                                   |
| 客房空调-客房       | 组合                                                   |
| 前台-酒店           | 聚合                                                   |
| 空调管理员-酒店     | 聚合                                                   |
| 酒店经理-酒店       | 聚合                                                   |
| 空调管理员-客房空调 | 单向关联,可产生”监控表”关联类                          |
| 入住客户-客房       | 双向关联,可产生一个关联类”登记表”,来记录入住退房等信息 |
| 入住客户-客房空调   | 单向关联,可产生”使用信息表”关联类                      |
| 酒店经理-统计报表   | 单向关联                                               |
| 前台-详单           | 单向关联                                               |
| 前台-账单           | 单向关联                                               |
| 详单-账单           | 继承                                                   |
| 详单-统计报表       | 继承                                                   |

### 1.3 设置概念类的关键属性

> 对属性的建模主要包括属性名、类型名、可见性和初始值，在识别类的属性时，只需建模属性的名称、类型和初始值（若有），暂时不需考虑可见性。

酒店分布式温控系统用例相关概念的部分属性

| 概念       | 属性及其类型                                                 |
| ---------- | ------------------------------------------------------------ |
| 酒店       | 名称(string)...                                              |
| 入住客户   | 姓名(string)…                                                |
| 客房       | 房间号(number)、实时温度(int)…                               |
| 客房空调   | 当前温度(int)、目标温度(int)、风速(string)、模式(string)、费用(float)、使用状态(Boolean)、当前时间(date)、使用时长(int)… |
| 前台       | 前台人员姓名(string)…                                        |
| 空调管理员 | 姓名(string)…                                                |
| 酒店经理   | 姓名(string)…                                                |
| 使用详单   | 日期(date)、时段(string)、风速(string)、模式(string)、使用时长(int)、耗电量(int)、费用(float)… |
| 账单       | 日期(date)、耗电量(int)、费用(float)…                        |
| 统计报表   | 周次(int)、月次(int)、总费用(float)、总耗电量(float)…        |

### 1.4 领域模型图

![](pic\domain_model.png)

### 1.5 注意事项

#### 1.5.1 构建领域模型时采用以下两种模式：

<img src="pic/mode.png" align='left' style="zoom:67%;" />

#### 1.5.2 概念类之间关系的表示：

* 依赖关系用带箭头的虚线；

* 关联关系用实线（带箭头）表示；

* 聚合关系用带空心菱形和箭头的直线表示；

* 组合关系用带实心菱形和箭头的直线表示；

* 关联类用虚线连接；

#### 1.5.3 属性应当优先定义为简单数据类型

